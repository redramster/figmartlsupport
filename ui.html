<style>
  body{margin:0}
button{
width: 62px;
    height: 32px;
    font-family: Arial, Helvetica, sans-serif;
    font-style: normal;
    font-weight: normal;
    font-size: 11px;
    line-height: 13px;
    border-radius: 6px;
    background: none;
  box-shadow: none;
  border:solid 1px #333;
  float: right;
  margin:8px 8px 8px 0;
}
/*
#create{background-color: #18A0FB;border-color:#18A0FB;
color: #FFFFFF;}*/
textarea{background: #FFFFFF;
border: 1px solid #D4D4D4;
box-sizing: content-box; 
outline: none;
border-radius: 2px;min-height:30px;
margin:auto;margin-top:8px;resize: none;
    overflow: hidden;}
textarea:focus{border:2px solid #18A0FB;}
.container{text-align:center;overflow: auto;}
.btn_container{border-top: solid 1px #e5e5e5;
    position: absolute;
    height: 50px;
    bottom: 0;
    width: 100%; 
    background-color: #ffffff}
#btn_clean{
  cursor: pointer;
  float: right;
    margin-right: 23px;
    margin-top: 16px;
}
</style>
<div id="container" class="container"><textarea id="rtltext" value="5" rows="5"></textarea>
  <div class="btn_container">
<button id="create">Close</button>
<button id="cancel">Cancel</button> 
<svg id="btn_clean" onclick="cleanNewLines()" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M11.8867 3.46266L12.1667 2.54466C12.2184 2.37554 12.3352 2.2339 12.4914 2.15088C12.6475 2.06786 12.8303 2.05028 12.9994 2.102C13.1685 2.15371 13.3102 2.2705 13.3932 2.42665C13.4762 2.58281 13.4938 2.76554 13.4421 2.93466L12.6621 5.48466C12.6104 5.65365 12.4937 5.79521 12.3377 5.87821C12.1817 5.96122 11.9991 5.97889 11.8301 5.92733L9.28007 5.14733C9.19458 5.12327 9.11476 5.08236 9.04529 5.02702C8.97583 4.97168 8.91812 4.90302 8.87556 4.82507C8.83301 4.74712 8.80645 4.66145 8.79746 4.5731C8.78847 4.48474 8.79722 4.39548 8.8232 4.31055C8.84919 4.22563 8.89188 4.14675 8.94877 4.07855C9.00566 4.01035 9.07561 3.95421 9.1545 3.91342C9.23339 3.87262 9.31963 3.84801 9.40817 3.84101C9.4967 3.83401 9.58575 3.84477 9.67006 3.87266L10.7847 4.21333C10.292 3.46593 9.60464 2.86712 8.79677 2.48139C7.98891 2.09566 7.09112 1.93763 6.2001 2.02431C5.30908 2.111 4.45859 2.43912 3.74023 2.97334C3.02187 3.50756 2.46286 4.22763 2.1234 5.056L1.95007 5.478C1.91854 5.5613 1.87064 5.63744 1.8092 5.70193C1.74776 5.76641 1.67402 5.81793 1.59234 5.85344C1.51066 5.88895 1.42268 5.90773 1.33362 5.90867C1.24456 5.90962 1.15621 5.89271 1.07379 5.85894C0.991373 5.82517 0.916557 5.77523 0.853762 5.71206C0.790966 5.64889 0.741465 5.57379 0.708181 5.49117C0.674898 5.40856 0.658506 5.32011 0.659974 5.23105C0.661443 5.142 0.680742 5.05414 0.716732 4.97266L0.890065 4.55066C1.32089 3.49952 2.02988 2.58556 2.94092 1.90694C3.85196 1.22832 4.93063 0.810666 6.06112 0.698816C7.19161 0.586967 8.33122 0.78515 9.35758 1.27209C10.3839 1.75902 11.2583 2.51632 11.8867 3.46266V3.46266ZM1.53873 10.538L1.32073 11.412C1.30123 11.4987 1.26459 11.5806 1.21298 11.6529C1.16137 11.7252 1.09582 11.7865 1.0202 11.8331C0.944568 11.8797 0.860382 11.9108 0.772586 11.9244C0.684791 11.938 0.595157 11.934 0.508952 11.9125C0.422748 11.891 0.341712 11.8525 0.270606 11.7992C0.199501 11.7459 0.139761 11.679 0.0948977 11.6023C0.0500341 11.5256 0.020952 11.4407 0.0093604 11.3526C-0.00223122 11.2645 0.00390155 11.175 0.0273983 11.0893L0.672065 8.50266C0.693815 8.41459 0.73331 8.33189 0.788133 8.25961C0.842956 8.18733 0.911954 8.12701 0.990902 8.08232C1.06985 8.03764 1.15709 8.00953 1.24727 7.99974C1.33746 7.98994 1.4287 7.99865 1.5154 8.02533L4.0674 8.66133C4.23899 8.70412 4.38656 8.81332 4.47764 8.96491C4.56872 9.1165 4.59585 9.29807 4.55307 9.46966C4.51028 9.64126 4.40108 9.78883 4.24948 9.87991C4.09789 9.97099 3.91633 9.99812 3.74473 9.95533L2.55406 9.65866C3.06308 10.4379 3.78257 11.0568 4.62909 11.4437C5.47562 11.8306 6.41448 11.9696 7.33679 11.8446C8.25909 11.7195 9.12705 11.3355 9.83998 10.7372C10.5529 10.1388 11.0816 9.35063 11.3647 8.464C11.3913 8.38056 11.4341 8.30319 11.4907 8.23629C11.5472 8.1694 11.6163 8.11429 11.6941 8.07411C11.7719 8.03393 11.8569 8.00948 11.9442 8.00214C12.0314 7.9948 12.1193 8.00472 12.2027 8.03133C12.2862 8.05795 12.3635 8.10073 12.4304 8.15725C12.4973 8.21377 12.5524 8.28291 12.5926 8.36072C12.6328 8.43854 12.6573 8.52351 12.6646 8.61077C12.6719 8.69804 12.662 8.7859 12.6354 8.86933C12.3579 9.73997 11.8929 10.5392 11.2732 11.2108C10.6536 11.8824 9.89427 12.4101 9.04873 12.7567C7.73128 13.2964 6.26915 13.3707 4.90377 12.9673C3.53838 12.564 2.35138 11.707 1.53873 10.538V10.538Z" fill="black"/>
  </svg>

</div>
</div>
<script>

 let modalWidth=document.body.clientWidth-20;
 let modalHeight=document.body.clientHeight-50;
 document.getElementById("container").setAttribute("style","height:"+modalHeight + "px")
document.getElementById('rtltext').focus()
document.getElementById('create').onclick = () => {
  const textbox = document.getElementById('rtltext');
  const rtltext = textbox.value;
  parent.postMessage({ pluginMessage: { type: 'input', rtltext } }, '*')
}
const obj = "rtltext"
parent.postMessage({ pluginMessage: { type: 'loaded',obj  } }, '*')

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}
document.getElementById('rtltext').onkeyup = () => {
  const textbox = document.getElementById('rtltext');
  const rtltext = textbox.value;
  parent.postMessage({ pluginMessage: { type: 'change',rtltext } }, '*')
  auto_grow(document.getElementById('rtltext'))
}
onmessage = (event) => {
 
  document.getElementById('rtltext').value=event.data.pluginMessage.text
  document.getElementById('rtltext').setAttribute("style","direction:rtl;width:" + event.data.pluginMessage.width + "px;height:" + event.data.pluginMessage.height + "px;font-family:'" + event.data.pluginMessage.font + "';font-size:" + event.data.pluginMessage.fontSize + "px;text-align:" +event.data.pluginMessage.textAlign )

}
function auto_grow(element) {
    element.style.height = "5px";
    element.style.height = (element.scrollHeight)+"px";
    let h=element.style.height
    parent.postMessage({ pluginMessage: { type: 'changeheight',h } }, '*')
}
function cleanNewLines(){
  const textbox = document.getElementById('rtltext');
  let rtltext = textbox.value;
  rtltext=rtltext.replace(/\r?\n|\r/g,' ')
  //
  parent.postMessage({ pluginMessage: { type: 'change',rtltext } }, '*')
  document.getElementById('rtltext').value=rtltext
  
}
</script>
